# Task 4
import pandas as pd
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt
import plotly.express as px

np.random.seed(42)
df = pd.DataFrame({
    "Employee_ID": range(1, 41),
    "Age": np.random.randint(22, 60, 40),
    "Years_of_Experience": np.random.randint(1, 20, 40),
    "Monthly_Salary": np.random.randint(30000, 150000, 40),
    "Satisfaction_Score": np.random.uniform(1, 5, 40),
    "Department": np.random.choice(["HR", "Finance", "IT", "Marketing", "Operations"], 40),
    "Job_Level": np.random.choice(["Junior", "Mid", "Senior"], 40)
})

sns.pairplot(df, vars=['Age', 'Years_of_Experience', 'Monthly_Salary', 'Satisfaction_Score'], hue='Department')
plt.suptitle('Scatterplot Matrix by Department', y=1.02)
plt.show()

df['Department_Code'] = df['Department'].astype('category').cat.codes

fig = px.parallel_coordinates(
    df,
    color="Department_Code",
    dimensions=['Age', 'Years_of_Experience', 'Monthly_Salary', 'Satisfaction_Score'],
    color_continuous_scale=px.colors.diverging.Tealrose,
    labels={"Department_Code": "Department"}
)
fig.update_layout(
    title="Parallel Coordinates Plot by Department",
    xaxis_title="Attributes",
    yaxis_title="Value"
)
fig.show()

print("\nGenerating Line Graph...")
plt.figure(figsize=(12, 6))
sns.lineplot(data=df, x='Years_of_Experience', y='Monthly_Salary', hue='Department')
plt.title('Monthly Salary Trend Across Experience Levels for Different Departments')
plt.xlabel('Years of Experience')
plt.ylabel('Monthly Salary')
plt.grid(True)
plt.show()

department_job_level_counts = df.groupby(['Department', 'Job_Level']).size().unstack(fill_value=0)
department_job_level_counts.plot(kind='bar', stacked=True, figsize=(12, 6))
plt.title('Total Number of Employees per Department, Broken Down by Job Level')
plt.xlabel('Department')
plt.ylabel('Number of Employees')
plt.xticks(rotation=45, ha='right')
plt.legend(title='Job Level')
plt.tight_layout()
plt.show()
